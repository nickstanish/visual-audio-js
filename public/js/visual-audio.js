!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(4)},,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=n(5),o=r(a),i=n(32),u=r(i),s=n(31),c=n(35),l=r(c),f=n(43),h=r(f);n(45),window.VISUAL_AUDIO={VERSION:window.VERSION};var d={quality:(0,s.getInitialQuality)()},v=(0,u.default)(d),p=new h.default,m=new l.default(p,v);(0,o.default)(v,p,m)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){function r(t){return"boolean"==typeof t&&t||"true"===t.toLowerCase()||"1"===t}function a(t){var e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){console.error(t),alert("Unable to initialize WebGL. Your browser may not support it.")}return window.gl=e,e}function o(){lt=at.createBuffer();var t=new Float32Array([-1,1,-1,-1,1,-1,1,1,-1,1,1,-1]);at.bindBuffer(at.ARRAY_BUFFER,lt),at.bufferData(at.ARRAY_BUFFER,t,at.STATIC_DRAW)}function i(t,e){st=at.createFramebuffer(),at.bindFramebuffer(at.FRAMEBUFFER,st),st.width=t,st.height=e,ct=at.createTexture(),at.activeTexture(at.TEXTURE0),at.bindTexture(at.TEXTURE_2D,ct),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_WRAP_S,at.CLAMP_TO_EDGE),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_WRAP_T,at.CLAMP_TO_EDGE),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_MAG_FILTER,at.LINEAR),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_MIN_FILTER,at.LINEAR),at.texImage2D(at.TEXTURE_2D,0,at.RGBA,st.width,st.height,0,at.RGBA,at.UNSIGNED_BYTE,null),at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,ct,0),at.bindFramebuffer(at.FRAMEBUFFER,null)}function c(){it=at.createTexture(),ot=new Image,ot.onload=function(){at.activeTexture(at.TEXTURE1),at.bindTexture(at.TEXTURE_2D,it),at.texImage2D(at.TEXTURE_2D,0,at.RGBA,at.RGBA,at.UNSIGNED_BYTE,ot),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_MAG_FILTER,at.LINEAR),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_MIN_FILTER,at.LINEAR),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_WRAP_S,at.CLAMP_TO_EDGE),at.texParameteri(at.TEXTURE_2D,at.TEXTURE_WRAP_T,at.CLAMP_TO_EDGE),ut=!0},ot.src="public/images/alpha-star.png"}function f(){o(),c(),i(at.canvas.clientWidth,at.canvas.clientHeight)}function d(){nt=[];var t=e.getFrequencyBinCount(),n=8,r=n/t,a=.2*r,o=e.getFrequencyData(),i=n/2;if(o&&o.length>0)for(var u=0;u<o.length;u++){var c=o[u]/255,l=c,f=0,h=u*r-i,d=h+(r-a),v=1,p=[h,l,v,h,f,v,d,f,v,d,l,v,h,l,v,d,f,v];nt=nt.concat(p)}rt=at.createBuffer(),at.bindBuffer(at.ARRAY_BUFFER,rt),at.bufferData(at.ARRAY_BUFFER,new Float32Array(nt),at.STATIC_DRAW),at.useProgram(W.getProgram()),at.uniformMatrix4fv(W.getUniformLocation(P.BAR_SHADER_CONFIG.uniforms.uPMatrix),!1,B),at.uniformMatrix4fv(W.getUniformLocation(P.BAR_SHADER_CONFIG.uniforms.uMVMatrix),!1,D.getModelViewMatrix());var m=s.mat4.create(),M=s.vec4.fromValues(0,-4,0,0);s.mat4.translate(m,m,M),at.uniformMatrix4fv(W.getUniformLocation(P.BAR_SHADER_CONFIG.uniforms.uMMatrix),!1,m),at.bindBuffer(at.ARRAY_BUFFER,rt),at.enableVertexAttribArray(W.getAttribLocation(P.BAR_SHADER_CONFIG.attributes.vertices)),at.vertexAttribPointer(W.getAttribLocation(P.BAR_SHADER_CONFIG.attributes.vertices),3,at.FLOAT,!1,0,0),at.drawArrays(at.TRIANGLES,0,nt.length/3),at.disableVertexAttribArray(W.getAttribLocation(P.BAR_SHADER_CONFIG.attributes.vertices))}function p(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,r=e.isPlaying()?0:5,a=30;at.useProgram(X.getProgram()),at.uniformMatrix4fv(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.modelMatrix),!1,H),at.uniformMatrix4fv(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.projectionMatrix),!1,B),at.uniformMatrix4fv(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.modelViewMatrix),!1,D.getModelViewMatrix()),at.uniform3fv(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.position),[0,0,0]),at.uniform1f(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.uTime),t.time),at.uniform1f(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.uScale),r+a*n),at.uniform1f(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.pixelDensity),k()),at.uniform1i(X.getUniformLocation(P.SHADER_GPU_PARTICLE_CONFIG.uniforms.tSprite),1);var o=X.getAttribLocation(P.SHADER_GPU_PARTICLE_CONFIG.attributes.particlePositionsStartTime),i=X.getAttribLocation(P.SHADER_GPU_PARTICLE_CONFIG.attributes.particleVelColSizeLife);at.bindBuffer(at.ARRAY_BUFFER,t.geometryPosStartBuffer),at.enableVertexAttribArray(o),at.vertexAttribPointer(o,4,at.FLOAT,!1,0,0),at.bindBuffer(at.ARRAY_BUFFER,t.geometryVelColBuffer),at.enableVertexAttribArray(i),at.vertexAttribPointer(i,4,at.FLOAT,!1,0,0),at.drawArrays(at.POINTS,0,t.PARTICLE_COUNT),at.disableVertexAttribArray(o),at.disableVertexAttribArray(i)}function M(t,n,r,a){var o=10,i=100,u=l.clamp(n);e.isPlaying()&&(s.mat4.rotateY(H,H,.01*u),s.mat4.rotateZ(H,H,.009*u));for(var c=0;c<q.length;c++){var f=q[c],h=o*r,d=g.COLORS[c].toValue();f.update(n,t);for(var v=0;v<h&&v<i;v++){var p=2*c*Math.PI/q.length,m=1.25,M=s.vec3.fromValues(m*Math.cos(p),m*Math.sin(p),0),y=s.vec3.normalize(s.vec3.create(),M);f.spawnParticle({position:M,velocity:y,velocityRandomness:.5,color:d,colorRandomness:0,lifetime:3,sizeRandomness:.4})}}}function _(){var t=s.mat4.create(),e=G.clientWidth/G.clientHeight,n=50,r=.1,a=N();return s.mat4.perspective(t,l.degreesToRadians(n),e,r,a),t}function A(){n.loadPredefinedUrl(tt)}function R(){ft&&ut&&(ft=!1,A()),O(),U(),et.begin();var t=1*V.getDelta();Q+=t,Q<0&&(Q=0);var n=e.getNormalizedFrequencyData()||{},r=[];if(e.isPlaying()&&n.bins&&(r=n.bins),t>0&&M(at,Q,t,r),Z.blur&&at.bindFramebuffer(at.FRAMEBUFFER,st),at.clear(at.COLOR_BUFFER_BIT|at.DEPTH_BUFFER_BIT),ut)for(var a=0;a<q.length;a++)p(q[a],r[a]);if(Z.blur){at.bindFramebuffer(at.FRAMEBUFFER,null),at.useProgram(K.getProgram());var o=K.getAttribLocation(P.QUAD_SHADER_CONFIG.attributes.vertices);at.enableVertexAttribArray(o);var i=0;Z.blur&&(i=n.average||0),at.activeTexture(at.TEXTURE0),at.uniform1i(K.getUniformLocation(P.QUAD_SHADER_CONFIG.uniforms.texture),0),at.uniform1f(K.getUniformLocation(P.QUAD_SHADER_CONFIG.uniforms.width),G.clientWidth),at.uniform1f(K.getUniformLocation(P.QUAD_SHADER_CONFIG.uniforms.height),G.clientHeight),at.uniform1f(K.getUniformLocation(P.QUAD_SHADER_CONFIG.uniforms.volume),i),at.bindBuffer(at.ARRAY_BUFFER,lt),at.vertexAttribPointer(o,2,at.FLOAT,!1,0,0),at.drawArrays(at.TRIANGLES,0,6),at.disableVertexAttribArray(o)}e&&e.isPlaying()&&Z.showBars&&d(),et.end(),requestAnimationFrame(R)}function O(){var t=F.getActiveActions();0!==t.length&&t.forEach(function(t){j[t]&&j[t]()})}function T(){var t=$(document);t.on("keydown",function(t){var e=t.keyCode;F.setKeyActive(e)}),t.on("keyup",function(t){var e=t.keyCode;F.setKeyInactive(e)}),F.registerKeyAction(S.VK_W,w.CAMERA_MOVE_POS_Z),F.registerKeyAction(S.VK_S,w.CAMERA_MOVE_NEG_Z),F.registerKeyAction(S.VK_A,w.CAMERA_MOVE_POS_X),F.registerKeyAction(S.VK_D,w.CAMERA_MOVE_NEG_X),F.registerKeyAction(S.VK_ARROW_LEFT,w.CAMERA_MOVE_NEG_YAW),F.registerKeyAction(S.VK_ARROW_RIGHT,w.CAMERA_MOVE_POS_YAW),F.registerKeyAction(S.VK_ARROW_UP,w.CAMERA_MOVE_POS_PITCH),F.registerKeyAction(S.VK_ARROW_DOWN,w.CAMERA_MOVE_NEG_PITCH),j[w.CAMERA_MOVE_POS_YAW]=function(){return D.updateYaw(1)},j[w.CAMERA_MOVE_NEG_YAW]=function(){return D.updateYaw(-1)},j[w.CAMERA_MOVE_POS_PITCH]=function(){return D.updatePitch(1)},j[w.CAMERA_MOVE_NEG_PITCH]=function(){return D.updatePitch(-1)},j[w.CAMERA_MOVE_POS_X]=function(){return D.updateX(1)},j[w.CAMERA_MOVE_NEG_X]=function(){return D.updateX(-1)},j[w.CAMERA_MOVE_POS_Y]=function(){return D.updateY(1)},j[w.CAMERA_MOVE_NEG_Y]=function(){return D.updateY(-1)},j[w.CAMERA_MOVE_POS_Z]=function(){return D.updateZ(1)},j[w.CAMERA_MOVE_NEG_Z]=function(){return D.updateZ(-1)}}function x(){et=new Stats,et.setMode(0),et.domElement.style.position="absolute",et.domElement.style.right="0",et.domElement.style.top="auto",et.domElement.style.bottom="0",document.body.appendChild(et.domElement)}function I(){X.compile(at),W.compile(at),K.compile(at)}function L(){G=document.getElementById("canvas"),B=_(),x(),T(),n.registerUI(),at=a(G),f(),I();for(var t=0;t<q.length;t++)q[t].init(at);at.enable(at.BLEND),at.blendEquation(at.FUNC_ADD),at.blendFunc(at.SRC_ALPHA,at.ONE),at.viewport(0,0,at.drawingBufferWidth,at.drawingBufferHeight),at.clearColor(0,0,0,1),at.disable(at.DEPTH_TEST),at.clear(at.COLOR_BUFFER_BIT|at.DEPTH_BUFFER_BIT),requestAnimationFrame(R)}function k(){switch(t.getState().quality){case C.Quality.HIGH:return window.devicePixelRatio||1;case C.Quality.LOW:return.5;case C.Quality.MEDIUM:default:return 1}}function N(){switch(t.getState().quality){case C.Quality.HIGH:return 1e4;case C.Quality.LOW:return 50;case C.Quality.MEDIUM:default:return 1e3}}function U(){var t=k(),e=Math.floor(at.canvas.clientWidth*t),n=Math.floor(at.canvas.clientHeight*t);at.canvas.width==e&&at.canvas.height==n||(i(e,n),at.canvas.width=e,at.canvas.height=n,at.viewport(0,0,at.drawingBufferWidth,at.drawingBufferHeight)),B=_()}for(var D=new v.default,F=new b.default,j={},V=new m.default(!0),q=[],Y=8,B=null,G=null,H=s.mat4.create(),z=0;z<Y;z++)q[z]=new y.default;var Q=0,X=new E.default(P.SHADER_GPU_PARTICLE_CONFIG),W=new E.default(P.BAR_SHADER_CONFIG),K=new E.default(P.QUAD_SHADER_CONFIG),Z={maxParticles:5e3,emissionRate:2,blur:!1,showBars:!0},J=h.getQueryParams(),tt=J.media;try{J.max&&parseInt(J.max)&&parseInt(J.max)>0&&(Z.maxParticles=parseInt(J.max)),J.rate&&parseInt(J.rate)&&parseInt(J.rate)>0&&(Z.emissionRate=parseInt(J.rate)),J.bars&&(Z.showBars=r(J.bars)),J.blur&&(Z.blur=r(J.blur))}catch(t){console.error&&console.error(t)}(0,u.default)(),document.addEventListener("DOMContentLoaded",L);var et=void 0,nt=void 0,rt=void 0,at=void 0,ot=void 0,it=void 0,ut=!1,st=void 0,ct=void 0,lt=void 0,ft=!0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(6),u=a(i),s=n(7),c=n(8),l=r(c),f=n(9),h=r(f),d=n(10),v=a(d),p=n(11),m=a(p),M=n(12),y=a(M),_=n(14),b=a(_),g=n(15),A=n(16),E=a(A),P=n(28),R=n(29),S=r(R),O=n(30),w=r(O),C=n(31);s.glMatrix.setMatrixArrayType(Float32Array)},function(t,e){"use strict";function n(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia}t.exports=function(){n()}},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function r(t){e.ARRAY_TYPE=u=t}function a(t){return t*s}function o(t,e){return Math.abs(t-e)<=i*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=a,e.equals=o;var i=e.EPSILON=1e-6,u=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,s=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new N.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function i(t){var e=new N.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(t,e,n,r,a,o,i,u,s){var c=new N.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=o,c[6]=i,c[7]=u,c[8]=s,c}function c(t,e,n,r,a,o,i,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=l*i-u*c,h=-l*o+u*s,d=c*o-i*s,v=n*f+r*h+a*d;return v?(v=1/v,t[0]=f*v,t[1]=(-l*r+a*c)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(l*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=d*v,t[7]=(-c*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null}function d(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8];return t[0]=i*l-u*c,t[1]=a*c-r*l,t[2]=r*u-a*i,t[3]=u*s-o*l,t[4]=n*l-a*s,t[5]=a*o-n*u,t[6]=o*c-i*s,t[7]=r*s-n*c,t[8]=n*i-r*o,t}function v(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-i*s)+n*(-c*a+i*u)+r*(s*a-o*u)}function p(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],v=n[2],p=n[3],m=n[4],M=n[5],y=n[6],_=n[7],b=n[8];return t[0]=h*r+d*i+v*c,t[1]=h*a+d*u+v*l,t[2]=h*o+d*s+v*f,t[3]=p*r+m*i+M*c,t[4]=p*a+m*u+M*l,t[5]=p*o+m*s+M*f,t[6]=y*r+_*i+b*c,t[7]=y*a+_*u+b*l,t[8]=y*o+_*s+b*f,t}function m(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=h*r+d*i+c,t[7]=h*a+d*u+l,t[8]=h*o+d*s+f,t}function M(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*s,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*s-h*o,t[6]=c,t[7]=l,t[8]=f,t}function y(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function A(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,M=o*s;return t[0]=1-f-v,t[3]=l-M,t[6]=h+m,t[1]=l+M,t[4]=1-c-v,t[7]=d-p,t[2]=h-m,t[5]=d+p,t[8]=1-c-f,t}function P(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],M=e[15],y=n*u-r*i,_=n*s-a*i,b=n*c-o*i,g=r*s-a*u,A=r*c-o*u,E=a*c-o*s,P=l*p-f*v,R=l*m-h*v,S=l*M-d*v,O=f*m-h*p,w=f*M-d*p,C=h*M-d*m,T=y*C-_*w+b*O+g*S-A*R+E*P;return T?(T=1/T,t[0]=(u*C-s*w+c*O)*T,t[1]=(s*S-i*C-c*R)*T,t[2]=(i*w-u*S+c*P)*T,t[3]=(a*w-r*C-o*O)*T,t[4]=(n*C-a*S+o*R)*T,t[5]=(r*S-n*w-o*P)*T,t[6]=(p*E-m*A+M*g)*T,t[7]=(m*b-v*E-M*_)*T,t[8]=(v*A-p*b+M*y)*T,t):null}function R(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function S(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function O(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function C(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function T(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function x(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function L(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=e[0],h=e[1],d=e[2],v=e[3],p=e[4],m=e[5],M=e[6],y=e[7],_=e[8];return Math.abs(n-f)<=N.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=N.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-d)<=N.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=N.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=N.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=N.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-M)<=N.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(c-y)<=N.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-_)<=N.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=a,e.fromMat4=o,e.clone=i,e.copy=u,e.fromValues=s,e.set=c,e.identity=l,e.transpose=f,e.invert=h,e.adjoint=d,e.determinant=v,e.multiply=p,e.translate=m,e.rotate=M,e.scale=y,e.fromTranslation=_,e.fromRotation=b,e.fromScaling=g,e.fromMat2d=A,e.fromQuat=E,e.normalFromMat4=P,e.projection=R,e.str=S,e.frob=O,e.add=w,e.subtract=C,e.multiplyScalar=T,e.multiplyScalarAndAdd=x,e.exactEquals=I,e.equals=L;var k=n(0),N=r(k);e.mul=p,e.sub=C},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new G.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){var e=new G.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function u(t,e,n){var r=new G.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function v(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function M(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function g(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function A(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function E(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function P(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function R(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function S(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function w(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t}function C(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t}function T(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),l=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+a[0]*l,t[1]=e[1]*u+n[1]*s+r[1]*c+a[1]*l,t[2]=e[2]*u+n[2]*s+r[2]*c+a[2]*l,t}function x(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,l=3*o*u,f=3*s*i,h=s*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+a[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+a[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+a[2]*h,t}function I(t,e){e=e||1;var n=2*G.RANDOM()*Math.PI,r=2*G.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function L(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t}function k(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t}function N(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t}function U(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function D(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function j(t,e){var n=u(t[0],t[1],t[2]),r=u(e[0],e[1],e[2]);S(n,n),S(r,r);var a=O(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function V(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Y(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(n-o)<=G.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=G.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=G.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=a,e.clone=o,e.length=i,e.fromValues=u,e.copy=s,e.set=c,e.add=l,e.subtract=f,e.multiply=h,e.divide=d,e.ceil=v,e.floor=p,e.min=m,e.max=M,e.round=y,e.scale=_,e.scaleAndAdd=b,e.distance=g,e.squaredDistance=A,e.squaredLength=E,e.negate=P,e.inverse=R,e.normalize=S,e.dot=O,e.cross=w,e.lerp=C,e.hermite=T,e.bezier=x,e.random=I,e.transformMat4=L,e.transformMat3=k,e.transformQuat=N,e.rotateX=U,e.rotateY=D,e.rotateZ=F,e.angle=j,e.str=V,e.exactEquals=q,e.equals=Y;var B=n(0),G=r(B);e.sub=f,e.mul=h,e.div=d,e.dist=g,e.sqrDist=A,e.len=i,e.sqrLen=E,e.forEach=function(){var t=a();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new U.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t){var e=new U.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e,n,r){var a=new U.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function p(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function M(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function g(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function A(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function E(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function P(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function R(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function S(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function w(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t}function C(t,e){return e=e||1,t[0]=U.RANDOM(),t[1]=U.RANDOM(),t[2]=U.RANDOM(),t[3]=U.RANDOM(),S(t,t),y(t,t,e),t}function T(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t}function x(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t[3]=e[3],t}function I(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function k(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-i)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=U.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=U.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=a,e.clone=o,e.fromValues=i,e.copy=u,e.set=s,e.add=c,e.subtract=l,e.multiply=f,e.divide=h,e.ceil=d,e.floor=v,e.min=p,e.max=m,e.round=M,e.scale=y,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=g,e.length=A,e.squaredLength=E,e.negate=P,e.inverse=R,e.normalize=S,e.dot=O,e.lerp=w,e.random=C,e.transformMat4=T,e.transformQuat=x,e.str=I,e.exactEquals=L,e.equals=k;var N=n(0),U=r(N);e.sub=l,e.mul=f,e.div=h,e.dist=b,e.sqrDist=g,e.len=A,e.sqrLen=E,e.forEach=function(){var t=a();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var a=n(0),o=r(a),i=n(5),u=r(i),s=n(6),c=r(s),l=n(1),f=r(l),h=n(7),d=r(h),v=n(8),p=r(v),m=n(9),M=r(m),y=n(2),_=r(y),b=n(3),g=r(b);e.glMatrix=o,e.mat2=u,e.mat2d=c,e.mat3=f,e.mat4=d,e.quat=p,e.vec2=M,e.vec3=_,e.vec4=g},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new C.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t){var e=new C.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n,r){var a=new C.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function c(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function l(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function f(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null}function h(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function d(t){return t[0]*t[3]-t[2]*t[1]}function v(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*c+o*l,t[3]=a*c+i*l,t}function p(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t}function m(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t}function M(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function y(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function _(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function b(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function g(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function A(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function R(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-i)<=C.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=C.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=C.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=C.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function S(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function O(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=a,e.clone=o,e.copy=i,e.identity=u,e.fromValues=s,e.set=c,e.transpose=l,e.invert=f,e.adjoint=h,e.determinant=d,e.multiply=v,e.rotate=p,e.scale=m,e.fromRotation=M,e.fromScaling=y,e.str=_,e.frob=b,e.LDU=g,e.add=A,e.subtract=E,e.exactEquals=P,e.equals=R,e.multiplyScalar=S,e.multiplyScalarAndAdd=O;var w=n(0),C=r(w);e.mul=v,e.sub=E},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new w.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t){var e=new w.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,n,r,a,o){
var i=new w.ARRAY_TYPE(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=a,i[5]=o,i}function c(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t}function l(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null}function f(t){return t[0]*t[3]-t[1]*t[2]}function h(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+s,t}function d(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*-c+o*l,t[3]=a*-c+i*l,t[4]=u,t[5]=s,t}function v(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=a*c,t[2]=o*l,t[3]=i*l,t[4]=u,t[5]=s,t}function p(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*c+o*l+u,t[5]=a*c+i*l+s,t}function m(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function _(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function b(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function g(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function A(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function P(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function S(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=e[0],c=e[1],l=e[2],f=e[3],h=e[4],d=e[5];return Math.abs(n-s)<=w.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=w.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=w.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-f)<=w.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=w.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=w.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=a,e.clone=o,e.copy=i,e.identity=u,e.fromValues=s,e.set=c,e.invert=l,e.determinant=f,e.multiply=h,e.rotate=d,e.scale=v,e.translate=p,e.fromRotation=m,e.fromScaling=M,e.fromTranslation=y,e.str=_,e.frob=b,e.add=g,e.subtract=A,e.multiplyScalar=E,e.multiplyScalarAndAdd=P,e.exactEquals=R,e.equals=S;var O=n(0),w=r(O);e.mul=h,e.sub=A},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new W.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=new W.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v,p){var m=new W.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=a,m[5]=o,m[6]=i,m[7]=u,m[8]=s,m[9]=c,m[10]=l,m[11]=f,m[12]=h,m[13]=d,m[14]=v,m[15]=p,m}function s(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=m,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],M=e[15],y=n*u-r*i,_=n*s-a*i,b=n*c-o*i,g=r*s-a*u,A=r*c-o*u,E=a*c-o*s,P=l*p-f*v,R=l*m-h*v,S=l*M-d*v,O=f*m-h*p,w=f*M-d*p,C=h*M-d*m,T=y*C-_*w+b*O+g*S-A*R+E*P;return T?(T=1/T,t[0]=(u*C-s*w+c*O)*T,t[1]=(a*w-r*C-o*O)*T,t[2]=(p*E-m*A+M*g)*T,t[3]=(h*A-f*E-d*g)*T,t[4]=(s*S-i*C-c*R)*T,t[5]=(n*C-a*S+o*R)*T,t[6]=(m*b-v*E-M*_)*T,t[7]=(l*E-h*b+d*_)*T,t[8]=(i*w-u*S+c*P)*T,t[9]=(r*S-n*w-o*P)*T,t[10]=(v*A-p*b+M*y)*T,t[11]=(f*b-l*A-d*y)*T,t[12]=(u*R-i*O-s*P)*T,t[13]=(n*O-r*R+a*P)*T,t[14]=(p*_-v*g-m*y)*T,t[15]=(l*g-f*_+h*y)*T,t):null}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],M=e[15];return t[0]=u*(h*M-d*m)-f*(s*M-c*m)+p*(s*d-c*h),t[1]=-(r*(h*M-d*m)-f*(a*M-o*m)+p*(a*d-o*h)),t[2]=r*(s*M-c*m)-u*(a*M-o*m)+p*(a*c-o*s),t[3]=-(r*(s*d-c*h)-u*(a*d-o*h)+f*(a*c-o*s)),t[4]=-(i*(h*M-d*m)-l*(s*M-c*m)+v*(s*d-c*h)),t[5]=n*(h*M-d*m)-l*(a*M-o*m)+v*(a*d-o*h),t[6]=-(n*(s*M-c*m)-i*(a*M-o*m)+v*(a*c-o*s)),t[7]=n*(s*d-c*h)-i*(a*d-o*h)+l*(a*c-o*s),t[8]=i*(f*M-d*p)-l*(u*M-c*p)+v*(u*d-c*f),t[9]=-(n*(f*M-d*p)-l*(r*M-o*p)+v*(r*d-o*f)),t[10]=n*(u*M-c*p)-i*(r*M-o*p)+v*(r*c-o*u),t[11]=-(n*(u*d-c*f)-i*(r*d-o*f)+l*(r*c-o*u)),t[12]=-(i*(f*m-h*p)-l*(u*m-s*p)+v*(u*h-s*f)),t[13]=n*(f*m-h*p)-l*(r*m-a*p)+v*(r*h-a*f),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*h-s*f)-i*(r*h-a*f)+l*(r*s-a*u),t}function d(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],m=t[15],M=e*i-n*o,y=e*u-r*o,_=e*s-a*o,b=n*u-r*i,g=n*s-a*i,A=r*s-a*u,E=c*v-l*d,P=c*p-f*d,R=c*m-h*d,S=l*p-f*v,O=l*m-h*v,w=f*m-h*p;return M*w-y*O+_*S+b*R-g*P+A*E}function v(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],m=e[13],M=e[14],y=e[15],_=n[0],b=n[1],g=n[2],A=n[3];return t[0]=_*r+b*u+g*f+A*p,t[1]=_*a+b*s+g*h+A*m,t[2]=_*o+b*c+g*d+A*M,t[3]=_*i+b*l+g*v+A*y,_=n[4],b=n[5],g=n[6],A=n[7],t[4]=_*r+b*u+g*f+A*p,t[5]=_*a+b*s+g*h+A*m,t[6]=_*o+b*c+g*d+A*M,t[7]=_*i+b*l+g*v+A*y,_=n[8],b=n[9],g=n[10],A=n[11],t[8]=_*r+b*u+g*f+A*p,t[9]=_*a+b*s+g*h+A*m,t[10]=_*o+b*c+g*d+A*M,t[11]=_*i+b*l+g*v+A*y,_=n[12],b=n[13],g=n[14],A=n[15],t[12]=_*r+b*u+g*f+A*p,t[13]=_*a+b*s+g*h+A*m,t[14]=_*o+b*c+g*d+A*M,t[15]=_*i+b*l+g*v+A*y,t}function p(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,M=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],s=e[2],c=e[3],l=e[4],f=e[5],h=e[6],d=e[7],v=e[8],p=e[9],m=e[10],M=e[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=l,t[5]=f,t[6]=h,t[7]=d,t[8]=v,t[9]=p,t[10]=m,t[11]=M,t[12]=i*r+l*a+v*o+e[12],t[13]=u*r+f*a+p*o+e[13],t[14]=s*r+h*a+m*o+e[14],t[15]=c*r+d*a+M*o+e[15]),t}function m(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function M(t,e,n,r){var a=r[0],o=r[1],i=r[2],u=Math.sqrt(a*a+o*o+i*i),s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,M=void 0,y=void 0,_=void 0,b=void 0,g=void 0,A=void 0,E=void 0,P=void 0,R=void 0,S=void 0,O=void 0,w=void 0,C=void 0,T=void 0,x=void 0;return Math.abs(u)<W.EPSILON?null:(u=1/u,a*=u,o*=u,i*=u,s=Math.sin(n),c=Math.cos(n),l=1-c,f=e[0],h=e[1],d=e[2],v=e[3],p=e[4],m=e[5],M=e[6],y=e[7],_=e[8],b=e[9],g=e[10],A=e[11],E=a*a*l+c,P=o*a*l+i*s,R=i*a*l-o*s,S=a*o*l-i*s,O=o*o*l+c,w=i*o*l+a*s,C=a*i*l+o*s,T=o*i*l-a*s,x=i*i*l+c,t[0]=f*E+p*P+_*R,t[1]=h*E+m*P+b*R,t[2]=d*E+M*P+g*R,t[3]=v*E+y*P+A*R,t[4]=f*S+p*O+_*w,t[5]=h*S+m*O+b*w,t[6]=d*S+M*O+g*w,t[7]=v*S+y*O+A*w,t[8]=f*C+p*T+_*x,t[9]=h*C+m*T+b*x,t[10]=d*C+M*T+g*x,t[11]=v*C+y*T+A*x,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function y(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*r,t[5]=i*a+l*r,t[6]=u*a+f*r,t[7]=s*a+h*r,t[8]=c*a-o*r,t[9]=l*a-i*r,t[10]=f*a-u*r,t[11]=h*a-s*r,t}function _(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*r,t[1]=i*a-l*r,t[2]=u*a-f*r,t[3]=s*a-h*r,t[8]=o*r+c*a,t[9]=i*r+l*a,t[10]=u*r+f*a,t[11]=s*r+h*a,t}function b(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*r,t[1]=i*a+l*r,t[2]=u*a+f*r,t[3]=s*a+h*r,t[4]=c*a-o*r,t[5]=l*a-i*r,t[6]=f*a-u*r,t[7]=h*a-s*r,t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function A(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var r=n[0],a=n[1],o=n[2],i=Math.sqrt(r*r+a*a+o*o),u=void 0,s=void 0,c=void 0;return Math.abs(i)<W.EPSILON?null:(i=1/i,r*=i,a*=i,o*=i,u=Math.sin(e),s=Math.cos(e),c=1-s,t[0]=r*r*c+s,t[1]=a*r*c+o*u,t[2]=o*r*c-a*u,t[3]=0,t[4]=r*a*c-o*u,t[5]=a*a*c+s,t[6]=o*a*c+r*u,t[7]=0,t[8]=r*o*c+a*u,t[9]=a*o*c-r*u,t[10]=o*o*c+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function P(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,c=o+o,l=r*u,f=r*s,h=r*c,d=a*s,v=a*c,p=o*c,m=i*u,M=i*s,y=i*c;return t[0]=1-(d+p),t[1]=f+y,t[2]=h-M,t[3]=0,t[4]=f-y,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=h+M,t[9]=v-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function w(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function C(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+l*l),t}function T(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function x(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,c=o+o,l=i+i,f=a*s,h=a*c,d=a*l,v=o*c,p=o*l,m=i*l,M=u*s,y=u*c,_=u*l,b=r[0],g=r[1],A=r[2];return t[0]=(1-(v+m))*b,t[1]=(h+_)*b,t[2]=(d-y)*b,t[3]=0,t[4]=(h-_)*g,t[5]=(1-(f+m))*g,t[6]=(p+M)*g,t[7]=0,t[8]=(d+y)*A,t[9]=(p-M)*A,t[10]=(1-(f+v))*A,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function I(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],c=o+o,l=i+i,f=u+u,h=o*c,d=o*l,v=o*f,p=i*l,m=i*f,M=u*f,y=s*c,_=s*l,b=s*f,g=r[0],A=r[1],E=r[2],P=a[0],R=a[1],S=a[2];return t[0]=(1-(p+M))*g,t[1]=(d+b)*g,t[2]=(v-_)*g,t[3]=0,t[4]=(d-b)*A,t[5]=(1-(h+M))*A,t[6]=(m+y)*A,t[7]=0,t[8]=(v+_)*E,t[9]=(m-y)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0]+P-(t[0]*P+t[4]*R+t[8]*S),t[13]=n[1]+R-(t[1]*P+t[5]*R+t[9]*S),t[14]=n[2]+S-(t[2]*P+t[6]*R+t[10]*S),t[15]=1,t}function L(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,M=o*s;return t[0]=1-f-v,t[1]=l+M,t[2]=h-m,t[3]=0,t[4]=l-M,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+m,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function N(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t}function U(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((i-u)*s*.5),t[9]=(a-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function D(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*c,t[15]=1,t}function F(t,e,n,r){var a=void 0,o=void 0,i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=e[0],p=e[1],m=e[2],M=r[0],y=r[1],_=r[2],b=n[0],g=n[1],A=n[2];return Math.abs(v-b)<W.EPSILON&&Math.abs(p-g)<W.EPSILON&&Math.abs(m-A)<W.EPSILON?mat4.identity(t):(l=v-b,f=p-g,h=m-A,d=1/Math.sqrt(l*l+f*f+h*h),l*=d,f*=d,h*=d,a=y*h-_*f,o=_*l-M*h,i=M*f-y*l,d=Math.sqrt(a*a+o*o+i*i),d?(d=1/d,a*=d,o*=d,i*=d):(a=0,o=0,i=0),u=f*i-h*o,s=h*a-l*i,c=l*o-f*a,d=Math.sqrt(u*u+s*s+c*c),d?(d=1/d,u*=d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=l,t[3]=0,t[4]=o,t[5]=s,t[6]=f,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(a*v+o*p+i*m),t[13]=-(u*v+s*p+c*m),t[14]=-(l*v+f*p+h*m),t[15]=1,t)}function j(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],s=r[1],c=r[2],l=a-n[0],f=o-n[1],h=i-n[2],d=l*l+f*f+h*h;d>0&&(d=1/Math.sqrt(d),l*=d,f*=d,h*=d);var v=s*h-c*f,p=c*l-u*h,m=u*f-s*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-h*p,t[5]=h*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function V(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function q(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function B(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function G(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function H(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Q(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],v=t[12],p=t[13],m=t[14],M=t[15],y=e[0],_=e[1],b=e[2],g=e[3],A=e[4],E=e[5],P=e[6],R=e[7],S=e[8],O=e[9],w=e[10],C=e[11],T=e[12],x=e[13],I=e[14],L=e[15];return Math.abs(n-y)<=W.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=W.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(a-b)<=W.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-g)<=W.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(i-A)<=W.EPSILON*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(u-E)<=W.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-P)<=W.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-R)<=W.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(l-S)<=W.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-O)<=W.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-w)<=W.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(d-C)<=W.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(v-T)<=W.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-x)<=W.EPSILON*Math.max(1,Math.abs(p),Math.abs(x))&&Math.abs(m-I)<=W.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(M-L)<=W.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=a,e.clone=o,e.copy=i,e.fromValues=u,e.set=s,e.identity=c,e.transpose=l,e.invert=f,e.adjoint=h,e.determinant=d,e.multiply=v,e.translate=p,e.scale=m,e.rotate=M,e.rotateX=y,e.rotateY=_,e.rotateZ=b,e.fromTranslation=g,e.fromScaling=A,e.fromRotation=E,e.fromXRotation=P,e.fromYRotation=R,e.fromZRotation=S,e.fromRotationTranslation=O,e.getTranslation=w,e.getScaling=C,e.getRotation=T,e.fromRotationTranslationScale=x,e.fromRotationTranslationScaleOrigin=I,e.fromQuat=L,e.frustum=k,e.perspective=N,e.perspectiveFromFieldOfView=U,e.ortho=D,e.lookAt=F,e.targetTo=j,e.str=V,e.frob=q,e.add=Y,e.subtract=B,e.multiplyScalar=G,e.multiplyScalarAndAdd=H,e.exactEquals=z,e.equals=Q;var X=n(0),W=r(X);e.mul=v,e.sub=B},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new b.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function u(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function s(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*l+i*u+a*c-o*s,t[1]=a*l+i*s+o*u-r*c,t[2]=o*l+i*c+r*s-a*u,t[3]=i*l-r*u-a*s-o*c,t}function c(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t}function l(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t}function f(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t}function h(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function d(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=n[0],c=n[1],l=n[2],f=n[3],h=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return d=a*s+o*c+i*l+u*f,d<0&&(d=-d,s=-s,c=-c,l=-l,f=-f),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-r)*h)/v,m=Math.sin(r*h)/v):(p=1-r,m=r),t[0]=p*a+m*s,t[1]=p*o+m*c,t[2]=p*i+m*l,t[3]=p*u+m*f,t}function v(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}function M(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*s*l-i*u*c,t[1]=i*u*l+o*s*c,t[2]=i*s*c-o*u*l,t[3]=i*s*l+o*u*c,t}function y(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=a,e.identity=o,e.setAxisAngle=i,e.getAxisAngle=u,e.multiply=s,e.rotateX=c,e.rotateY=l,e.rotateZ=f,e.calculateW=h,e.slerp=d,e.invert=v,e.conjugate=p,e.fromMat3=m,e.fromEuler=M,e.str=y;var _=n(0),b=r(_),g=n(1),A=r(g),E=n(2),P=r(E),R=n(3),S=r(R),O=(e.clone=S.clone,e.fromValues=S.fromValues,e.copy=S.copy,e.set=S.set,e.add=S.add,e.mul=s,e.scale=S.scale,e.dot=S.dot,e.lerp=S.lerp,e.length=S.length),w=(e.len=O,e.squaredLength=S.squaredLength),C=(e.sqrLen=w,e.normalize=S.normalize);e.exactEquals=S.exactEquals,e.equals=S.equals,e.rotationTo=function(){var t=P.create(),e=P.fromValues(1,0,0),n=P.fromValues(0,1,0);return function(r,a,o){var u=P.dot(a,o);return u<-.999999?(P.cross(t,e,a),P.len(t)<1e-6&&P.cross(t,n,a),P.normalize(t,t),i(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(P.cross(t,a,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,C(r,r))}}(),e.sqlerp=function(){var t=a(),e=a();return function(n,r,a,o,i,u){return d(t,r,i,u),d(e,a,o,u),d(n,t,e,2*u*(1-u)),n}}(),e.setAxes=function(){var t=A.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],C(e,m(e,t))}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new j.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t){var e=new j.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function i(t,e){var n=new j.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function p(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function M(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function g(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function A(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function P(t,e){return t[0]=-e[0],t[1]=-e[1],t}function R(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function S(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]}function w(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function C(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t}function T(t,e){e=e||1;var n=2*j.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function x(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function I(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function L(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function k(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function N(t){return"vec2("+t[0]+", "+t[1]+")"}function U(t,e){return t[0]===e[0]&&t[1]===e[1]}function D(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=j.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=j.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=a,e.clone=o,e.fromValues=i,e.copy=u,e.set=s,e.add=c,e.subtract=l,e.multiply=f,e.divide=h,e.ceil=d,e.floor=v,e.min=p,e.max=m,e.round=M,e.scale=y,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=g,e.length=A,e.squaredLength=E,e.negate=P,e.inverse=R,e.normalize=S,e.dot=O,e.cross=w,e.lerp=C,e.random=T,e.transformMat2=x,e.transformMat2d=I,e.transformMat3=L,e.transformMat4=k,e.str=N,e.exactEquals=U,e.equals=D;var F=n(0),j=r(F);e.len=A,e.sub=l,e.mul=f,e.div=h,e.dist=b,e.sqrDist=g,e.sqrLen=E,e.forEach=function(){var t=a();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}()}])})},function(t,e){"use strict";function n(t){return t*(Math.PI/180)}function r(t){return t*(180/Math.PI)}function a(t,e){return Math.floor(Math.random()*(e-t+1))+t}function o(t,e){return Math.random()*(e-t)+t}function i(t,e,n,r){return d[0]=Math.floor(r),d[1]=Math.floor(n),d[2]=Math.floor(e),d[3]=Math.floor(t),v[0]}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function s(t,e,n){return"#"+u(t)+u(e)+u(n)}function c(t,e,n){return(t<<16)+(e<<8)+n}function l(t){var e=t>>16,n=(65280&t)>>8,r=255&t;return e>0&&e--,n>0&&n--,r>0&&r--,[e,n,r]}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e===n?1:(t-e)/(n-e)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t>=n?n:t<=e?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.degreesToRadians=n,e.radiansToDegrees=r,e.getRandomInt=a,e.getRandom=o,e.decodeFloat=i,e.componentToHex=u,e.rgbToHex=s,e.rgbToValue=c,e.hexToRgb=l,e.normalize=f,e.clamp=h;var d=new Uint8Array(4),v=new Float32Array(d.buffer)},function(t,e){"use strict";function n(){var t=window.location.search.substring(1)||"";if(""===t)return{};for(var e={},n=t.split("&"),r=0;r<n.length;r++){var a=n[r].split("=",2);1==a.length?e[a[0]]="":e[a[0]]=decodeURIComponent(a[1].replace(/\+/g," "))}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getQueryParams=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(7),i=o.mat4,u=.05,s=.05,c=[.5,.5,.5],l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-10;r(this,t),this.position=[e,n,a],this.pitch=0,this.yaw=0}return a(t,[{key:"moveTo",value:function(t,e,n){this.position=[t,e,n]}},{key:"getModelViewMatrix",value:function(){var t=i.create();return i.rotateX(t,t,-this.pitch),i.rotateY(t,t,this.yaw),i.translate(t,t,this.position),t}},{key:"updatePitch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pitch+=u*t}},{key:"updateYaw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.yaw+=s*t}},{key:"updateX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.position[0]=this.position[0]+c[0]*t}},{key:"updateY",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.position[1]=this.position[1]+c[1]*t}},{key:"updateZ",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.position[2]=this.position[2]+c[2]*t}}]),t}();e.default=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return r(t,[{key:"start",value:function(){this.startTime=Date.now(),this.oldTime=this.startTime,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1}},{key:"getElapsedTime",value:function(){return this.elapsedTime+=this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=Date.now();t=.001*(e-this.oldTime),this.oldTime=e,this.elapsedTime+=t}return t}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),s=a(u),c=n(13),l=r(c),f=1e5,h=window.devicePixelRatio,d=function(){function t(e){o(this,t),this.PARTICLE_COUNT=e||f,this.PARTICLE_CURSOR=0,this.time=0,this.randomsStore=new l.default(function(){return s.getRandom(-1,1)}),this.particles=[],this.deadParticles=[],this.particlesAvailableSlot=[],this.particleUpdate=!1,this.particleBuffers={vertices:new Float32Array(3*this.PARTICLE_COUNT),positionsStartTime:new Float32Array(4*this.PARTICLE_COUNT),velColSizeLife:new Float32Array(4*this.PARTICLE_COUNT)},this.geometryPosStart=new Float32Array(4*this.PARTICLE_COUNT),this.geometryVelCol=new Float32Array(4*this.PARTICLE_COUNT),this.offset=0,this.count=0}return i(t,[{key:"init",value:function(t){this.geometryPosStartBuffer=t.createBuffer(),this.geometryVelColBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.geometryPosStartBuffer),t.bufferData(t.ARRAY_BUFFER,this.geometryPosStart,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.geometryVelColBuffer),t.bufferData(t.ARRAY_BUFFER,this.geometryVelCol,t.DYNAMIC_DRAW);for(var e=this.particleBuffers,n=e.vertices,r=e.positionsStartTime,a=e.velColSizeLife,o=0;o<this.PARTICLE_COUNT;o++){var i=4*o,u=3*o;r[i]=0,r[i+1]=0,r[i+2]=0,r[i+3]=0,n[u]=0,n[u+1]=0,n[u+2]=0,a[i]=s.decodeFloat(128,128,0,0),
a[i+1]=s.decodeFloat(0,255,0,255),a[i+2]=1,a[i+3]=0}}},{key:"spawnParticle",value:function(t){t=t||{};var e=[0,0,0],n=[0,0,0],r=0,a=0,o=16777215,i=0,u=0,c=0,l=0,f=0,d=void 0,v=2,p=250;e=void 0!==t.position?t.position:e,n=void 0!==t.velocity?t.velocity:n,r=void 0!==t.positionRandomness?t.positionRandomness:0,a=void 0!==t.velocityRandomness?t.velocityRandomness:0,o=void 0!==t.color?t.color:16777215,i=void 0!==t.colorRandomness?t.colorRandomness:1,u=void 0!==t.turbulence?t.turbulence:1,c=void 0!==t.lifetime?t.lifetime:5,l=void 0!==t.size?t.size:10,f=void 0!==t.sizeRandomness?t.sizeRandomness:0,d=void 0!==t.smoothPosition&&t.smoothPosition,void 0!==h&&(l*=h);var m=this.PARTICLE_CURSOR;this.geometryPosStart[4*m+0]=e[0]+this.randomsStore.random()*r,this.geometryPosStart[4*m+1]=e[1]+this.randomsStore.random()*r,this.geometryPosStart[4*m+2]=e[2]+this.randomsStore.random()*r,this.geometryPosStart[4*m+3]=this.time,d===!0&&(this.geometryPosStart[4*m+0]+=-(n[0]*this.randomsStore.random()),this.geometryPosStart[4*m+1]+=-(n[1]*this.randomsStore.random()),this.geometryPosStart[4*m+2]+=-(n[2]*this.randomsStore.random()));var M=n[0]+this.randomsStore.random()*a,y=n[1]+this.randomsStore.random()*a,_=n[2]+this.randomsStore.random()*a;u=Math.floor(255*u),M=Math.floor(p*((M- -v)/(v- -v))),y=Math.floor(p*((y- -v)/(v- -v))),_=Math.floor(p*((_- -v)/(v- -v))),this.geometryVelCol[4*m+0]=s.decodeFloat(M,y,_,u);for(var b=s.hexToRgb(o),g=0;g<b.length;g++)b[g]=Math.floor(b[g]+this.randomsStore.random()*i*255),b[g]>=255&&(b[g]=255),b[g]<=0&&(b[g]=0);this.geometryVelCol[4*m+1]=s.decodeFloat(b[0],b[1],b[2],255),this.geometryVelCol[4*m+2]=l+this.randomsStore.random()*f,this.geometryVelCol[4*m+3]=c,0==this.offset&&(this.offset=this.PARTICLE_CURSOR),this.count++,this.PARTICLE_CURSOR++,this.PARTICLE_CURSOR>=this.PARTICLE_COUNT&&(this.PARTICLE_CURSOR=0),this.particleUpdate=!0}},{key:"update",value:function(t,e){this.time=t,this.geometryUpdate(e)}},{key:"geometryUpdate",value:function(t){if(1==this.particleUpdate){if(this.particleUpdate=!1,this.count<this.PARTICLE_COUNT){var e=4*this.offset,n=e+4*this.count,r=4*e;t.bindBuffer(t.ARRAY_BUFFER,this.geometryPosStartBuffer),t.bufferSubData(t.ARRAY_BUFFER,r,this.geometryPosStart.subarray(e,n)),t.bindBuffer(t.ARRAY_BUFFER,this.geometryVelColBuffer),t.bufferSubData(t.ARRAY_BUFFER,r,this.geometryVelCol.subarray(e,n))}else t.bufferData(t.ARRAY_BUFFER,this.geometryPosStart,t.DYNAMIC_DRAW),t.bufferData(t.ARRAY_BUFFER,this.geometryVelColBuffer,t.DYNAMIC_DRAW);this.offset=0,this.count=0}}}]),t}();e.default=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e.DEFAULT_MAX_RANDOMS=1e4,o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;n(this,t),this.MAX_RANDOMS=r,this.randoms=new Float32Array(this.MAX_RANDOMS),this.init(e),this.cursor=0}return r(t,[{key:"init",value:function(t){for(var e=0;e<this.randoms.length;e++)this.randoms[e]=t()}},{key:"random",value:function(){return this.cursor>=this.randoms.length&&(this.cursor=0),this.randoms[this.cursor++]}}]),t}();e.default=o},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.keyStatus={},this.keysToActions={}}return a(t,[{key:"setKeyActive",value:function(t){this.keyStatus[t]=!0}},{key:"setKeyInactive",value:function(t){this.keyStatus[t]=!1}},{key:"isKeyActive",value:function(t){return!!this.keyStatus[t]}},{key:"registerKeyAction",value:function(t,e){this.keysToActions[t]=e}},{key:"getActiveActions",value:function(){var t=this,e=Object.keys(this.keyStatus).filter(function(e){return t.isKeyActive(e)}),r=new Set;return e.forEach(function(e){t.keysToActions[e]&&r.add(t.keysToActions[e])}),[].concat(n(r))}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.COLORS=e.COLOR_NAMES=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(8),i=function(){function t(e,n,a){r(this,t),this.r=e,this.g=n,this.b=a}return a(t,[{key:"toHexString",value:function(){var t=this.r,e=this.g,n=this.b;return(0,o.rgbToHex)(t,e,n)}},{key:"toValue",value:function(){var t=this.r,e=this.g,n=this.b;return(0,o.rgbToValue)(t,e,n)}},{key:"toArray",value:function(){var t=this.r,e=this.g,n=this.b;return[t,e,n]}}]),t}(),u=e.COLOR_NAMES={red:new i(244,67,54),purple:new i(156,39,176),blue:new i(33,150,243),green:new i(76,175,80),yellow:new i(255,235,59),orange:new i(255,152,0),cyan:new i(0,172,193),hotPink:new i(255,105,180),nightVision:new i(62,241,165)};e.COLORS=[u.purple,u.blue,u.cyan,u.green,u.yellow,u.orange,u.hotPink,u.red]},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n,r){var a=t.createShader(r);return t.shaderSource(a,n),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS)?a:(console.log("An error occurred compiling the shaders: ",t.getShaderInfoLog(a),e),null)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(17),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.config=e,this.attribute={},this.uniform={},this.program=null}return o(t,[{key:"compile",value:function(t){var e=this,n=this.config,r=i.VERTEX_SOURCES[n.vertex],o=i.FRAGMENT_SOURCES[n.fragment],u=a(t,n.vertex,r,t.VERTEX_SHADER),s=a(t,n.fragment,o,t.FRAGMENT_SHADER),c=t.createProgram();this.program=c,t.attachShader(c,u),t.attachShader(c,s),t.linkProgram(c),t.useProgram(c),n.attributes&&Object.keys(n.attributes).forEach(function(r){var a=n.attributes[r],o=t.getAttribLocation(c,a);e.attribute[a]=o}),n.uniforms&&Object.keys(n.uniforms).forEach(function(r){var a=n.uniforms[r],o=t.getUniformLocation(c,a);e.uniform[a]=o})}},{key:"getUniformLocation",value:function(t){return this.uniform[t]}},{key:"getAttribLocation",value:function(t){return this.attribute[t]}},{key:"getProgram",value:function(){return this.program}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FRAGMENT_SOURCES={simpleShader:n(18),lineShader:n(19),barShader:n(20),quadShader:n(21),gpuParticleShader:n(22)},e.VERTEX_SOURCES={simpleShader:n(23),lineShader:n(24),barShader:n(25),quadShader:n(26),gpuParticleShader:n(27)}},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nvarying lowp vec4 vColor;\n      \nvoid main(void) {\n  gl_FragColor = vColor;\n}"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n      \nvoid main(void) {\n  gl_FragColor = vec4(1,0,0,1);\n}"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nvoid main(void) {\n  gl_FragColor = vec4(0.24,0.94,0.644,1.0);\n}\n"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\nprecision mediump float;\n\nuniform sampler2D inTexture;\nuniform float inWidth;\nuniform float inHeight;\nuniform float inVolume;\n\nvarying vec2 coord;\n\n\nvoid main(void) {\n  // gl_FragColor = texture2D(inTexture, coord);\n  vec2 center = vec2(0.5, 0.5);\n  vec2 offsetRatio = vec2(1.0 / inWidth, 1.0 / inHeight);\n  float intensity = 20.0 * inVolume;\n  if (inVolume <= 0.0) {\n    intensity = 1.0;\n  }\n\n  vec2 blurVec = (coord - center) * intensity;\n  vec4 pixel = vec4(0.0);\n  for (float i = 0.0; i < 4.0 ; i++){\n    vec2 offset =  blurVec * (i - 4.0) * offsetRatio;\n    float weight = (4.0 - i) / 8.0;\n    pixel += weight * texture2D(inTexture, coord + offset);\n  }\n  gl_FragColor = vec4(pixel.rgb, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nfloat scaleLinear(float value, vec2 valueDomain) {\n  return (value - valueDomain.x) / (valueDomain.y - valueDomain.x);\n}\n\nfloat scaleLinear(float value, vec2 valueDomain, vec2 valueRange) {\n  return mix(valueRange.x, valueRange.y, scaleLinear(value, valueDomain));\n}\n\nvarying vec4 vColor;\nvarying float lifeLeft;\n\nuniform sampler2D tSprite;\n\nvoid main() {\n\n  float alpha = 0.;\n\n  if (lifeLeft > .995 ) {\n    alpha = scaleLinear( lifeLeft, vec2(1., .995), vec2(0., 1.)); //mix( 0., 1., ( lifeLeft - .95 ) * 100. ) * .75;\n  } else {\n    alpha = lifeLeft * .75;\n  }\n\n  vec4 tex = texture2D( tSprite, gl_PointCoord );\n\n  gl_FragColor = vec4( vColor.rgb * tex.rgb, alpha * tex.a);\n}\n"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nattribute vec3 aVertexPosition;\nattribute vec4 aVertexColor;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uMMatrix;\n\nvarying lowp vec4 vColor;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * uMMatrix * vec4(aVertexPosition, 1.0);\n  vColor = aVertexColor;\n}"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nattribute vec3 inCoord;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(inCoord, 1.0);\n}"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nattribute vec3 aVertexPosition;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uMMatrix;\n\nvarying lowp vec4 vColor;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * uMMatrix * vec4(aVertexPosition, 1.0);\n}"},function(t,e){t.exports="/**\n* Copyright 2015 Nick Stanish\n*\n*/\n\n\nattribute vec2 inCoord;\n\nvarying vec2 coord;\n\nvoid main(void) {\n  gl_Position = vec4((inCoord * 2.0) - vec2(1.0), 0.0, 1.0);\n  coord = inCoord;\n}"},function(t,e){t.exports="precision highp float;\n\nconst vec4 bitSh = vec4(256. * 256. * 256., 256. * 256., 256., 1.);\nconst vec4 bitMsk = vec4(0.,vec3(1./256.0));\nconst vec4 bitShifts = vec4(1.) / bitSh;\n\n#define FLOAT_MAX\t1.70141184e38\n#define FLOAT_MIN\t1.17549435e-38\n\nlowp vec4 encode_float(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n  return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n  return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n  return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nvec4 pack(const in float depth) {\n  const vec4 bit_shift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n  const vec4 bit_mask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n  vec4 res = mod(depth*bit_shift*vec4(255), vec4(256))/vec4(255);\n  res -= res.xxyz * bit_mask;\n  return res;\n}\n\nfloat unpack(const in vec4 rgba_depth) {\n  const vec4 bit_shift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n  float depth = dot(rgba_depth, bit_shift);\n  return depth;\n}\n\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelMatrix;\nuniform vec3 position;\n\nuniform float pixelDensity;\nuniform float uTime;\nuniform float uScale;\n// uniform sampler2D tNoise;\n\nattribute vec4 particlePositionsStartTime;\nattribute vec4 particleVelColSizeLife;\n\nvarying vec4 vColor;\nvarying float lifeLeft;\n\nvoid main() {\n\n  // unpack things from our attributes\n  vColor = encode_float( particleVelColSizeLife.y );\n\n  // convert our velocity back into a value we can use\n  vec4 velTurb = encode_float( particleVelColSizeLife.x );\n  vec3 velocity = vec3( velTurb.xyz );\n  float turbulence = velTurb.w;\n\n  vec3 newPosition;\n\n  float timeElapsed = uTime - particlePositionsStartTime.a;\n\n  lifeLeft = 1. - (timeElapsed / particleVelColSizeLife.w);\n\n  gl_PointSize = ( uScale * particleVelColSizeLife.z ) * lifeLeft * pixelDensity;\n\n  velocity.x = ( velocity.x - .5 ) * 3.;\n  velocity.y = ( velocity.y - .5 ) * 3.;\n  velocity.z = ( velocity.z - .5 ) * 3.;\n\n  newPosition = particlePositionsStartTime.xyz + ( velocity * 10. ) * ( uTime - particlePositionsStartTime.a );\n\n  // vec3 noise = texture2D( tNoise, vec2( newPosition.x * .015 + (uTime * .05), newPosition.y * .02 + (uTime * .015) )).rgb;\n  // vec3 noiseVel = ( noise.rgb - .5 ) * 30.;\n\n  newPosition = mix(newPosition, newPosition /* + vec3(noiseVel * ( turbulence * 5. ) ) */, (timeElapsed / particleVelColSizeLife.a) );\n\n  if (velocity.y > 0. && velocity.y < .05) {\n    lifeLeft = 0.;\n  }\n\n  if (velocity.x < -1.45 ) {\n    lifeLeft = 0.0;\n  }\n\n  if (timeElapsed > 0.0) {\n    gl_Position = projectionMatrix * modelViewMatrix * modelMatrix * vec4( newPosition, 1.0 );\n  } else {\n    gl_Position = projectionMatrix * modelViewMatrix * modelMatrix * vec4( position, 1.0 );\n    lifeLeft = 0.0;\n    gl_PointSize = 0.0;\n  }\n}\n"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SHADER_GPU_PARTICLE_CONFIG={vertex:"gpuParticleShader",fragment:"gpuParticleShader",uniforms:{projectionMatrix:"projectionMatrix",modelViewMatrix:"modelViewMatrix",modelMatrix:"modelMatrix",position:"position",uTime:"uTime",uScale:"uScale",tSprite:"tSprite",pixelDensity:"pixelDensity"},attributes:{particlePositionsStartTime:"particlePositionsStartTime",particleVelColSizeLife:"particleVelColSizeLife"}},e.QUAD_SHADER_CONFIG={vertex:"quadShader",fragment:"quadShader",uniforms:{width:"inWidth",height:"inHeight",volume:"inVolume",texture:"inTexture"},attributes:{vertices:"inCoord"}},e.BAR_SHADER_CONFIG={vertex:"barShader",fragment:"barShader",uniforms:{uPMatrix:"uPMatrix",uMVMatrix:"uMVMatrix",uMMatrix:"uMMatrix"},attributes:{vertices:"aVertexPosition"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.VK_W=87,e.VK_A=65,e.VK_S=83,e.VK_D=68,e.VK_ARROW_LEFT=37,e.VK_ARROW_UP=38,e.VK_ARROW_RIGHT=39,e.VK_ARROW_DOWN=40},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CAMERA_MOVE_POS_YAW="CAMERA_MOVE_POS_YAW",e.CAMERA_MOVE_NEG_YAW="CAMERA_MOVE_NEG_YAW",e.CAMERA_MOVE_POS_PITCH="CAMERA_MOVE_POS_PITCH",e.CAMERA_MOVE_NEG_PITCH="CAMERA_MOVE_NEG_PITCH",e.CAMERA_MOVE_POS_X="CAMERA_MOVE_POS_X",e.CAMERA_MOVE_NEG_X="CAMERA_MOVE_NEG_X",e.CAMERA_MOVE_POS_Y="CAMERA_MOVE_POS_Y",e.CAMERA_MOVE_NEG_Y="CAMERA_MOVE_NEG_Y",e.CAMERA_MOVE_POS_Z="CAMERA_MOVE_POS_Z",e.CAMERA_MOVE_NEG_Z="CAMERA_MOVE_NEG_Z"},function(t,e){"use strict";function n(){return r.HIGH}Object.defineProperty(e,"__esModule",{value:!0}),e.getInitialQuality=n;var r=e.Quality={HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(){var t=0;return function(){return t++}}function o(t,e){Object.keys(t).forEach(function(n){var r=t[n];r(e)})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=a(),n={},r=t;return{getState:function(){return r},updateState:function(t){var e=u({},r,t);(0,c.default)(e,r)||(o(n,e),r=e)},subscribe:function(t){var r=e();return n[r]=t,function(){delete n[r]}}}}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=i;var s=n(33),c=r(s)},function(t,e,n){(function(t,n){function r(t,e){for(var n=-1,r=null==t?0:t.length,a=0,o=[];++n<r;){var i=t[n];e(i,n,t)&&(o[a++]=i)}return o}function a(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t}function o(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function i(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function u(t){return function(e){return t(e)}}function s(t,e){return t.has(e)}function c(t,e){return null==t?void 0:t[e]}function l(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function f(t,e){return function(n){return t(e(n))}}function h(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function v(){this.__data__=De?De(null):{},this.size=0}function p(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function m(t){var e=this.__data__;if(De){var n=e[t];return n===bt?void 0:n}return _e.call(e,t)?e[t]:void 0}function M(t){var e=this.__data__;return De?void 0!==e[t]:_e.call(e,t)}function y(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=De&&void 0===e?bt:e,this}function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(){this.__data__=[],this.size=0}function g(t){var e=this.__data__,n=q(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Oe.call(e,n,1),--this.size,!0}function A(t){var e=this.__data__,n=q(e,t);return n<0?void 0:e[n][1]}function E(t){return q(this.__data__,t)>-1}function P(t,e){var n=this.__data__,r=q(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function R(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function S(){this.size=0,this.__data__={hash:new d,map:new(Le||_),string:new d}}function O(t){var e=tt(this,t).delete(t);return this.size-=e?1:0,e}function w(t){return tt(this,t).get(t)}function C(t){return tt(this,t).has(t)}function T(t,e){var n=tt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function x(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new R;++e<n;)this.add(t[e])}function I(t){return this.__data__.set(t,bt),this}function L(t){return this.__data__.has(t)}function k(t){var e=this.__data__=new _(t);this.size=e.size}function N(){this.__data__=new _,this.size=0}function U(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function D(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function j(t,e){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Le||r.length<_t-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new R(r)}return n.set(t,e),this.size=n.size,this}function V(t,e){var n=Xe(t),r=!n&&Qe(t),a=!n&&!r&&We(t),o=!n&&!r&&!a&&$e(t),u=n||r||a||o,s=u?i(t.length,String):[],c=s.length;for(var l in t)!e&&!_e.call(t,l)||u&&("length"==l||a&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||rt(l,c))||s.push(l);return s}function q(t,e){for(var n=t.length;n--;)if(ct(t[n][0],e))return n;return-1}function Y(t,e,n){var r=e(t);return Xe(t)?r:a(r,n(t))}function B(t){return null==t?void 0===t?Yt:kt:we&&we in Object(t)?nt(t):ut(t)}function G(t){return pt(t)&&B(t)==Pt}function H(t,e,n,r,a){return t===e||(null==t||null==e||!pt(t)&&!pt(e)?t!==t&&e!==e:z(t,e,n,r,H,a))}function z(t,e,n,r,a,o){var i=Xe(t),u=Xe(e),s=i?Rt:ze(t),c=u?Rt:ze(e);s=s==Pt?Nt:s,c=c==Pt?Nt:c;var l=s==Nt,f=c==Nt,h=s==c;if(h&&We(t)){if(!We(e))return!1;i=!0,l=!1}if(h&&!l)return o||(o=new k),i||$e(t)?$(t,e,n,r,a,o):K(t,e,s,n,r,a,o);if(!(n&gt)){var d=l&&_e.call(t,"__wrapped__"),v=f&&_e.call(e,"__wrapped__");if(d||v){var p=d?t.value():t,m=v?e.value():e;return o||(o=new k),a(p,m,n,r,o)}}return!!h&&(o||(o=new k),Z(t,e,n,r,a,o))}function Q(t){if(!vt(t)||ot(t))return!1;var e=ht(t)?Ae:ne;return e.test(st(t))}function X(t){return pt(t)&&dt(t.length)&&!!ae[B(t)]}function W(t){if(!it(t))return xe(t);var e=[];for(var n in Object(t))_e.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $(t,e,n,r,a,i){var u=n&gt,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var h=-1,d=!0,v=n&At?new x:void 0;for(i.set(t,e),i.set(e,t);++h<c;){var p=t[h],m=e[h];if(r)var M=u?r(m,p,h,e,t,i):r(p,m,h,t,e,i);if(void 0!==M){if(M)continue;d=!1;break}if(v){if(!o(e,function(t,e){if(!s(v,e)&&(p===t||a(p,t,n,r,i)))return v.push(e)})){d=!1;break}}else if(p!==m&&!a(p,m,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}function K(t,e,n,r,a,o,i){switch(n){case Ht:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gt:return!(t.byteLength!=e.byteLength||!o(new Re(t),new Re(e)));case Ot:case wt:case Lt:return ct(+t,+e);case Ct:return t.name==e.name&&t.message==e.message;case Ft:case Vt:return t==e+"";case It:var u=l;case jt:var s=r&gt;if(u||(u=h),t.size!=e.size&&!s)return!1;var c=i.get(t);if(c)return c==e;r|=At,i.set(t,e);var f=$(u(t),u(e),r,a,o,i);return i.delete(t),f;case qt:if(Ge)return Ge.call(t)==Ge.call(e)}return!1}function Z(t,e,n,r,a,o){var i=n&gt,u=J(t),s=u.length,c=J(e),l=c.length;if(s!=l&&!i)return!1;for(var f=s;f--;){var h=u[f];if(!(i?h in e:_e.call(e,h)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var v=!0;o.set(t,e),o.set(e,t);for(var p=i;++f<s;){h=u[f];var m=t[h],M=e[h];if(r)var y=i?r(M,m,h,e,t,o):r(m,M,h,t,e,o);if(!(void 0===y?m===M||a(m,M,n,r,o):y)){v=!1;break}p||(p="constructor"==h)}if(v&&!p){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(v=!1)}return o.delete(t),o.delete(e),v}function J(t){return Y(t,mt,He)}function tt(t,e){var n=t.__data__;return at(e)?n["string"==typeof e?"string":"hash"]:n.map}function et(t,e){var n=c(t,e);return Q(n)?n:void 0}function nt(t){var e=_e.call(t,we),n=t[we];try{t[we]=void 0;var r=!0}catch(t){}var a=ge.call(t);return r&&(e?t[we]=n:delete t[we]),a}function rt(t,e){return e=null==e?Et:e,!!e&&("number"==typeof t||re.test(t))&&t>-1&&t%1==0&&t<e}function at(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ot(t){return!!be&&be in t}function it(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||me;return t===n}function ut(t){return ge.call(t)}function st(t){if(null!=t){try{return ye.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ct(t,e){return t===e||t!==t&&e!==e}function lt(t){return null!=t&&dt(t.length)&&!ht(t)}function ft(t,e){return H(t,e)}function ht(t){if(!vt(t))return!1;var e=B(t);return e==Tt||e==xt||e==St||e==Dt}function dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Et}function vt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function pt(t){return null!=t&&"object"==typeof t}function mt(t){return lt(t)?V(t):W(t)}function Mt(){return[]}function yt(){return!1}var _t=200,bt="__lodash_hash_undefined__",gt=1,At=2,Et=9007199254740991,Pt="[object Arguments]",Rt="[object Array]",St="[object AsyncFunction]",Ot="[object Boolean]",wt="[object Date]",Ct="[object Error]",Tt="[object Function]",xt="[object GeneratorFunction]",It="[object Map]",Lt="[object Number]",kt="[object Null]",Nt="[object Object]",Ut="[object Promise]",Dt="[object Proxy]",Ft="[object RegExp]",jt="[object Set]",Vt="[object String]",qt="[object Symbol]",Yt="[object Undefined]",Bt="[object WeakMap]",Gt="[object ArrayBuffer]",Ht="[object DataView]",zt="[object Float32Array]",Qt="[object Float64Array]",Xt="[object Int8Array]",Wt="[object Int16Array]",$t="[object Int32Array]",Kt="[object Uint8Array]",Zt="[object Uint8ClampedArray]",Jt="[object Uint16Array]",te="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,ae={};ae[zt]=ae[Qt]=ae[Xt]=ae[Wt]=ae[$t]=ae[Kt]=ae[Zt]=ae[Jt]=ae[te]=!0,ae[Pt]=ae[Rt]=ae[Gt]=ae[Ot]=ae[Ht]=ae[wt]=ae[Ct]=ae[Tt]=ae[It]=ae[Lt]=ae[Nt]=ae[Ft]=ae[jt]=ae[Vt]=ae[Bt]=!1;var oe="object"==typeof t&&t&&t.Object===Object&&t,ie="object"==typeof self&&self&&self.Object===Object&&self,ue=oe||ie||Function("return this")(),se="object"==typeof e&&e&&!e.nodeType&&e,ce=se&&"object"==typeof n&&n&&!n.nodeType&&n,le=ce&&ce.exports===se,fe=le&&oe.process,he=function(){try{return fe&&fe.binding&&fe.binding("util")}catch(t){}}(),de=he&&he.isTypedArray,ve=Array.prototype,pe=Function.prototype,me=Object.prototype,Me=ue["__core-js_shared__"],ye=pe.toString,_e=me.hasOwnProperty,be=function(){var t=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ge=me.toString,Ae=RegExp("^"+ye.call(_e).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=le?ue.Buffer:void 0,Pe=ue.Symbol,Re=ue.Uint8Array,Se=me.propertyIsEnumerable,Oe=ve.splice,we=Pe?Pe.toStringTag:void 0,Ce=Object.getOwnPropertySymbols,Te=Ee?Ee.isBuffer:void 0,xe=f(Object.keys,Object),Ie=et(ue,"DataView"),Le=et(ue,"Map"),ke=et(ue,"Promise"),Ne=et(ue,"Set"),Ue=et(ue,"WeakMap"),De=et(Object,"create"),Fe=st(Ie),je=st(Le),Ve=st(ke),qe=st(Ne),Ye=st(Ue),Be=Pe?Pe.prototype:void 0,Ge=Be?Be.valueOf:void 0;d.prototype.clear=v,d.prototype.delete=p,d.prototype.get=m,d.prototype.has=M,d.prototype.set=y,_.prototype.clear=b,_.prototype.delete=g,_.prototype.get=A,_.prototype.has=E,_.prototype.set=P,R.prototype.clear=S,R.prototype.delete=O,R.prototype.get=w,R.prototype.has=C,R.prototype.set=T,x.prototype.add=x.prototype.push=I,x.prototype.has=L,k.prototype.clear=N,k.prototype.delete=U,k.prototype.get=D,k.prototype.has=F,k.prototype.set=j;var He=Ce?function(t){return null==t?[]:(t=Object(t),r(Ce(t),function(e){return Se.call(t,e)}))}:Mt,ze=B;(Ie&&ze(new Ie(new ArrayBuffer(1)))!=Ht||Le&&ze(new Le)!=It||ke&&ze(ke.resolve())!=Ut||Ne&&ze(new Ne)!=jt||Ue&&ze(new Ue)!=Bt)&&(ze=function(t){var e=B(t),n=e==Nt?t.constructor:void 0,r=n?st(n):"";if(r)switch(r){case Fe:return Ht;case je:return It;case Ve:return Ut;case qe:return jt;case Ye:return Bt}return e});var Qe=G(function(){return arguments}())?G:function(t){return pt(t)&&_e.call(t,"callee")&&!Se.call(t,"callee")},Xe=Array.isArray,We=Te||yt,$e=de?u(de):X;n.exports=ft}).call(e,function(){return this}(),n(34)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(36),u=r(i),s=n(38),c=r(s),l=n(39),f=r(l),h=n(42),d=r(h),v=n(43),p=n(37),m="#media-player",M="#audio-chooser",y="#file-chooser",_="#voice-chooser",b=".media-btn",g="#urlSource",A="#urlSourceForm",E=/soundcloud.com/,P=function(){function t(e,n){a(this,t),this.audioManager=e,this.store=n}return o(t,[{key:"registerUI",value:function(){var t=this;this.audioManager.registerStateListener(this.onAudioStateChange.bind(this)),this.audioManager.registerQueueListener(this.onQueueChanged.bind(this));var e=$(y),n=$(_),r=$("#media-controls [data-control='play']"),a=$("#media-controls [data-control='pause']"),o=$("#media-controls [data-control='stop']"),i=$("#media-controls [data-control='next']"),u=$(g),s=$(A);e.on("change",function(e){t.onFileChosen(e)}),n.on("click",function(e){t.onVoiceChosen(e)}),r.on("click",function(e){t.onPlayClicked(e)}),a.on("click",function(e){t.onPauseClicked(e)}),o.on("click",function(e){t.onStopClicked(e)}),i.on("click",function(e){t.onNextClicked(e)}),u.on("keyup, keydown",function(t){t.stopPropagation()}),u.on("input",function(e){e.stopPropagation(),t.matchUrlSources(u.val()),t.updateUrlHasText()}),u.on("blur",function(e){t.updateUrlHasText()}),s.on("submit",function(e){e.preventDefault(),e.stopPropagation(),t.onUrlInputUpdated(u.val()),u.blur()}),$("body").on("click","#settings [data-quality]",function(e){return t.setQuality(e)}),$("body").on("click","#media-queue [data-queue-index].close",function(e){return t.onRemoveQueueItem(e)}),this.init()}},{key:"setQuality",value:function(t){var e=$(t.target).attr("data-quality");this.store.updateState({quality:e})}},{key:"init",value:function(){var t="public/samples/Broke_For_Free_-_01_-_Night_Owl.mp3";$(g).val(t),this.updateUrlHasText(),this.unsubscribe=this.store.subscribe(this.onStateUpdated)}},{key:"onStateUpdated",value:function(t){var e=$("#settings [data-quality].active");e.attr("data-quality")!==t.quality&&(e.removeClass("active"),["LOW","MEDIUM","HIGH"].includes(t.quality)&&$('#settings [data-quality="'+t.quality+'"]').addClass("active"))}},{key:"loadPredefinedUrl",value:function(t){var e=this;t&&t.trim()&&($("body").addClass("has-predefined-media"),$("#start").one("click",function(){e.onUrlInputUpdated(t),$("body").removeClass("has-predefined-media")}))}},{key:"updateUrlHasText",value:function(){var t=$(g),e=t.val();e&&e.trim()?t.addClass("__hasText"):t.removeClass("__hasText")}},{key:"matchUrlSources",value:function(t){var e="active";$(".url-icons i.fa-soundcloud").toggleClass(e,E.test(t))}},{key:"onAudioStateChange",value:function(t,e){console.log("on state change %s %s",t,e);var n=this.audioManager.getCurrentSourceInfo();if(n&&n.type===p.SOURCE_TYPES.MIC)return void this.setMicControls();switch(t===v.AUDIO_STATE.OFF&&e===v.AUDIO_STATE.PLAYING&&(this.setControlsToStarted(),this.setQueueControls()),e){case v.AUDIO_STATE.OFF:this.setControlsToStopped(),this.setNowPlaying(null),this.resetQueueControls();break;case v.AUDIO_STATE.PLAYING:this.setControlsToPlaying(),this.displayCurrentSong();break;case v.AUDIO_STATE.PAUSED:this.setControlsToPaused()}this.renderMediaQueue()}},{key:"displayCurrentSong",value:function(){var t=this.audioManager.getCurrentSourceInfo()||{};this.setNowPlaying(t.label)}},{key:"onQueueChanged",value:function(){this.displayCurrentSong(),this.renderMediaQueue()}},{key:"addSource",value:function(t){var e=this;t.onLoaded(function(){console.log("SUCCESS"),e.audioManager.addMediaSource(t)},function(t){console.error("ERROR",t)})}},{key:"onFileChosen",value:function(t){var e=this;if(0!==t.target.files.length){var n=this.audioManager.getAudioContext(),r=Array.prototype.slice.call(t.target.files);r.forEach(function(t){var r=new u.default(n,t);e.addSource(r)}),this.resetFileChooser()}}},{key:"onVoiceChosen",value:function(){var t=this.audioManager.getCurrentSourceInfo();if(t&&t.type===p.SOURCE_TYPES.MIC)this.resetMicControls(),this.audioManager.stop();else{var e=this.audioManager.getAudioContext(),n=new c.default(e);this.addSource(n)}}},{key:"onPlayClicked",value:function(){this.audioManager.resume()}},{key:"onPauseClicked",value:function(){this.audioManager.pause()}},{key:"onStopClicked",value:function(t){this.audioManager.stop()}},{key:"onNextClicked",value:function(t){this.audioManager.playNext()}},{key:"setNowPlaying",value:function(t){$("#now-playing").text(t)}},{key:"setControlsToStarted",value:function(){
$(m).removeClass("off").addClass("on")}},{key:"setControlsToStopped",value:function(){$(m).addClass("off").removeClass("on"),$(M).removeClass("no-select")}},{key:"resetFileChooser",value:function(){var t=$(M);t.wrap("<form>").closest("form").get(0).reset(),t.unwrap()}},{key:"setControlsToPaused",value:function(){var t=$(m);t.removeClass("playing"),t.addClass("paused")}},{key:"setControlsToPlaying",value:function(){var t=$(m);t.removeClass("paused"),t.addClass("playing")}},{key:"setMicControls",value:function(){var t=$(_),e=$(y),n=$(g);n.attr("disabled","disabled"),e.find("input, .media-btn").attr("disabled","disabled"),t.addClass("active")}},{key:"setQueueControls",value:function(){var t=$(_);t.find(""+b).attr("disabled","disabled")}},{key:"resetQueueControls",value:function(){var t=$(_);t.find(""+b).removeAttr("disabled")}},{key:"resetMicControls",value:function(){var t=$(_),e=$(y),n=$(g);n.removeAttr("disabled"),e.find("input, "+b).removeAttr("disabled"),t.removeClass("active")}},{key:"renderMediaSource",value:function(t,e){var n='<button type="button" class="close" data-queue-index='+e+' aria-label="Remove"><span aria-hidden="true"></span></button>';return"<li>"+n+'<span class="title" data-index="'+e+'">'+t.label+"</span></li>"}},{key:"onRemoveQueueItem",value:function(t){var e=$(t.target).attr("data-queue-index");this.audioManager.removeQueueIndex(e)}},{key:"renderMediaQueue",value:function(){var t=this,e=$("#media-queue"),n=this.audioManager.getQueueInfo().map(function(e,n){return t.renderMediaSource(e,n)}),r=$("<ul></ul>").append(n);e.empty().append(r)}},{key:"onUrlInputUpdated",value:function(t){var e=$(g);if(e.val(""),t&&t.trim()){var n=t.trim(),r=null,a=this.audioManager.getAudioContext();r=E.test(n)?new f.default(a,n):new d.default(a,n),r&&this.addSource(r)}}}]),t}();e.default=P},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(t){console.error(t),n(t)},r.readAsArrayBuffer(t)})}function u(t,e){var n=t.createBufferSource();return n.buffer=e,n.start||(n.start=n.noteOn,n.stop=n.noteOff),n}function s(t,e){return new Promise(function(n,r){t.decodeAudioData(e,function(e){var r=u(t,e);n(r)},function(t){console.error(t),r(t)})})}Object.defineProperty(e,"__esModule",{value:!0});var c=n(37),l=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.SOURCE_TYPES.FILE,t,!0));return o.file=n,o.fileName=n.name,o.label=o.fileName,o.isLoaded=!1,o.fileLoaderPromise=i(n).then(function(e){return s(t,e)}).then(function(t){return o.isLoaded=!0,o.audioNode=t,Promise.resolve()}).catch(function(t){return Promise.reject(t)}),o}return o(e,t),e}(c.MediaSource);e.default=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=e.SOURCE_TYPES={AUDIO_ELEMENT:"AUDIO_ELEMENT",FILE:"FILE",MIC:"MIC",SOUNDCLOUD:"SOUNDCLOUD"},u=function(t){function e(t){n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.message=t,a.name=a.constructor.name,a}return a(e,t),e}(Error),s="Invalid source type";e.MediaSource=function(){function t(e,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n(this,t),!(e in i))throw new u(s);this.sourceType=e,this.audioContext=r,this.useSpeakerDestination=a,this.allowQueuing=o,this.label=null,this.metaData=null,this.isLoaded=!0,this.audioNode=null,this.fileLoaderPromise=Promise.resolve()}return o(t,[{key:"isLoaded",value:function(){return this.isLoaded}},{key:"onLoaded",value:function(t,e){this.fileLoaderPromise.then(t,e)}},{key:"shouldConnectDestination",value:function(){return this.useSpeakerDestination}},{key:"shouldAllowQueueing",value:function(){return this.allowQueuing}},{key:"getLabel",value:function(){return this.label}},{key:"getMetaData",value:function(){return this.metaData}},{key:"getType",value:function(){return this.sourceType}},{key:"getAudioNode",value:function(){return this.audioNode}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return new Promise(function(e,n){navigator.getUserMedia(s,function(n){var r=t.createMediaStreamSource(n);e(r)},function(t){console.error(t),n(t)})})}Object.defineProperty(e,"__esModule",{value:!0});var u=n(37),s={audio:!0},c=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u.SOURCE_TYPES.MIC,t,!1,!1));return o.file=n,o.isLoaded=!1,o.fileLoaderPromise=i(t).then(function(t){return o.isLoaded=!0,o.audioNode=t,Promise.resolve()}).catch(function(t){return Promise.reject(t)}),o}return o(e,t),e}(u.MediaSource);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){return new f.default(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(37),l=n(40),f=r(l),h=n(41),d=r(h),v=5e3,p=function(t){function e(t,n){a(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.SOURCE_TYPES.SOUNDCLOUD,t,!0));return r.url=n,r.label=n,r.isLoaded=!1,r.error=!1,r.soundCloudPlayer=u(d.default.apis.soundCloud.clientKey),r.soundCloudTrackInfo=null,r.onEndedCallbacks=[],r.fileLoaderPromise=Promise.race([new Promise(function(e,a){r.soundCloudPlayer.resolve(n,function(n){if(r.error)return console.log("error",r.error),void a(r.error);r.soundCloudTrackInfo=n,console.log(n);var o=r.soundCloudPlayer.audio;o.crossOrigin="anonymous",r.isLoaded=!0,r.audioNode=t.createMediaElementSource(o),e()})}),new Promise(function(t,e){setTimeout(function(){var t="SoundCloud request timed out";r.error=t,e(t)},v)})]),r}return i(e,t),s(e,[{key:"onEnded",value:function(t){this.onEndedCallbacks.push(t)}},{key:"_onEnd",value:function(){for(var t=0;t<this.onEndedCallbacks.length;t++)this.onEndedCallbacks[t]();this.onEndedCallbacks.splice(0)}},{key:"play",value:function(){var t=this;this.soundCloudPlayer.on("ended",function(){return t._onEnd()}),this.soundCloudPlayer.play()}}]),e}(c.MediaSource);e.default=p},function(t,e){"use strict";function n(t){o||(o=document.createElement("a")),o.href=t||"";for(var e={},n=0,r=i.length;n<r;n++){var a=i[n];e[a]=o[a]}return e}function r(t,e,r){var a=n(t),o=/\?(?:.*)$/,i=o.test(a.search)?"&":"?",u=a.protocol+"//"+a.host+a.port+a.pathname+a.search+i+e+"="+r+a.hash;return u}function a(t){if(!(this instanceof a))return new a(t);if(!t)throw new Error("SoundCloud API clientId is required, get it - https://developers.soundcloud.com/");this._events={},this._clientId=t,this._baseUrl="https://api.soundcloud.com",this.playing=!1,this.duration=0,this.audio=document.createElement("audio")}var o,i="protocol hostname host pathname port search hash href".split(" ");a.prototype.resolve=function(t,e){if(!t)throw new Error("SoundCloud track or playlist url is required");var r=this._baseUrl+"/resolve.json?url="+encodeURIComponent(t)+"&client_id="+this._clientId;this._json(r,function(r){if(this.cleanData(),Array.isArray(r)){var a=r;r={tracks:a},this._playlist=r}else if(r.tracks)this._playlist=r;else{this._track=r;var o=n(t);this._track.stream_url+=o.hash}this.duration=r.duration&&!isNaN(r.duration)?r.duration/1e3:0,e(r)}.bind(this))},a.prototype._jsonp=function(t,e){var n=document.getElementsByTagName("script")[0]||document.head,a=document.createElement("script"),o="jsonp_callback_"+(new Date).valueOf()+Math.floor(1e3*Math.random());window[o]=function(t){a.parentNode&&a.parentNode.removeChild(a),window[o]=function(){},e(t)},a.src=r(t,"callback",o),n.parentNode.insertBefore(a,n)},a.prototype._json=function(t,e){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t={};try{t=JSON.parse(n.responseText)}catch(t){}e(t)}},n.send(null)},a.prototype.on=function(t,e){this._events[t]=e,this.audio.addEventListener(t,e,!1)},a.prototype.off=function(t,e){this._events[t]=null,this.audio.removeEventListener(t,e)},a.prototype.unbindAll=function(){for(var t in this._events){var e=this._events[t];e&&this.off(t,e)}},a.prototype.preload=function(t){this._track={stream_url:t},this.audio.src=r(t,"client_id",this._clientId)},a.prototype.play=function(t){t=t||{};var e;if(t.streamUrl)e=t.streamUrl;else if(this._playlist){var n=this._playlist.tracks.length;if(n){if(this._playlistIndex=t.playlistIndex||0,this._playlistIndex>=n||this._playlistIndex<0)return void(this._playlistIndex=0);e=this._playlist.tracks[this._playlistIndex].stream_url}}else this._track&&(e=this._track.stream_url);if(!e)throw new Error("There is no tracks to play, use `streamUrl` option or `load` method");e=r(e,"client_id",this._clientId),e!==this.audio.src&&(this.audio.src=e),this.playing=e,this.audio.play()},a.prototype.pause=function(){this.audio.pause(),this.playing=!1},a.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0,this.playing=!1},a.prototype.next=function(){var t=this._playlist.tracks.length;this._playlistIndex>=t-1||this._playlist&&t&&this.play({playlistIndex:++this._playlistIndex})},a.prototype.previous=function(){this._playlistIndex<=0||this._playlist&&this._playlist.tracks.length&&this.play({playlistIndex:--this._playlistIndex})},a.prototype.seek=function(t){if(!this.audio.readyState)return!1;var e=t.offsetX/t.target.offsetWidth||(t.layerX-t.target.offsetLeft)/t.target.offsetWidth;this.audio.currentTime=e*(this.audio.duration||0)},a.prototype.cleanData=function(){this._track=void 0,this._playlist=void 0},a.prototype.setVolume=function(t){this.audio.readyState&&(this.audio.volume=t)},a.prototype.setTime=function(t){this.audio.readyState&&(this.audio.currentTime=t)},t.exports=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={apis:{soundCloud:{clientKey:"59dfd35daaba9223150507c5d9d30da9"}}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),u=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i.SOURCE_TYPES.AUDIO_ELEMENT,t,!0));return o.url=n,o.label=n,o.isLoaded=!1,o.fileLoaderPromise=new Promise(function(e,r){var a=document.getElementById("audio");return a?(a.src=n,a.play(),e(t.createMediaElementSource(a))):r("Cannot init audio tag source")}).then(function(t){return o.isLoaded=!0,o.audioNode=t,Promise.resolve()}).catch(function(t){return Promise.reject(t)}),o}return o(e,t),e}(i.MediaSource);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIO_STATE=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(44),u=r(i),s=e.AUDIO_STATE={OFF:"OFF",PLAYING:"PLAYING",PAUSED:"PAUSED"},c=.85,l=function(){function t(){a(this,t),this.mediaQueue=new u.default,this.audioContext=new AudioContext,this.analyser=null,this.state=s.OFF,this.currentMediaSource=null,this.stateListeners=[],this.queueListeners=[]}return o(t,[{key:"getAudioContext",value:function(){return this.audioContext}},{key:"isPlaying",value:function(){return this.state===s.PLAYING}},{key:"addMediaSource",value:function(t){0!==this.mediaQueue.size()||this.isPlaying()?t.shouldAllowQueueing()?(this.mediaQueue.enqueue(t),this.notifyQueueListeners()):console.error("Attempt to enqueue source that doesn't allow queueing"):this.connectMediaSource(t)}},{key:"notifyQueueListeners",value:function(){for(var t=0;t<this.stateListeners.length;t++)this.queueListeners[t]()}},{key:"notifyStateListeners",value:function(t,e){for(var n=0;n<this.stateListeners.length;n++)this.stateListeners[n](t,e)}},{key:"setState",value:function(t){var e=this.state;this.state=t,this.notifyStateListeners(e,t)}},{key:"registerQueueListener",value:function(t){this.queueListeners.push(t)}},{key:"registerStateListener",value:function(t){this.stateListeners.push(t)}},{key:"getQueueInfo",value:function(){return this.mediaQueue.getDisplayValues()}},{key:"removeQueueIndex",value:function(t){this.mediaQueue.popIndex(t),this.notifyQueueListeners()}},{key:"getCurrentSourceInfo",value:function(){return this.currentMediaSource?{label:this.currentMediaSource.getLabel(),metadata:this.currentMediaSource.getMetaData(),type:this.currentMediaSource.getType()}:null}},{key:"playNext",value:function(){this.stop(!1),this.onMediaEnded()}},{key:"onMediaEnded",value:function(){if(console.log("song ended"),this.mediaQueue.size()>0){var t=this.mediaQueue.dequeue();this.notifyQueueListeners(),this.connectMediaSource(t)}else this.currentMediaSource=null,this.setState(s.OFF)}},{key:"connectMediaSource",value:function(t){var e=this;this.currentMediaSource=t;var n=this.currentMediaSource.getAudioNode();t.onEnded?t.onEnded(function(){return e.onMediaEnded()}):n.onended=function(){return e.onMediaEnded()};var r=void 0;this.currentMediaSource.shouldConnectDestination()&&(r=this.audioContext.destination),this.setupAudioNodes(n,r),n.start?n.start(0):t.play&&t.play(),this.setState(s.PLAYING)}},{key:"resume",value:function(){var t=this;"suspended"===this.audioContext.state&&this.audioContext.resume().then(function(){return t.setState(s.PLAYING)})}},{key:"pause",value:function(){var t=this;"running"===this.audioContext.state&&this.audioContext.suspend().then(function(){return t.setState(s.PAUSED)})}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.currentMediaSource;if(e&&e.getAudioNode()){var n=e.getAudioNode();if(n.mediaStream){var r=n.mediaStream;if(r.getAudioTracks())for(var a=0;a<r.getAudioTracks().length;a++)r.getAudioTracks()[a].stop&&r.getAudioTracks()[a].stop()}else n.stop&&n.stop();n.disconnect()}this.currentMediaSource=null,t&&(this.clearQueue(),this.setState(s.OFF))}},{key:"clearQueue",value:function(){this.mediaQueue.clear()}},{key:"createDefaultAnalyser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=this.audioContext.createAnalyser();return n.smoothingTimeConstant=e,n.fftSize=t,n}},{key:"setupAudioNodes",value:function(t,e){var n=this.createDefaultAnalyser();t.connect(n),e&&n.connect(e),this.analyser=n}},{key:"getFrequencyBinCount",value:function(){return this.analyser.frequencyBinCount}},{key:"getNormalizedFrequencyData",value:function(){if(this.isPlaying()){var t=this.getFrequencyData();if(t&&t.length){for(var e=t.length,n={average:0,bins:[],max:0,min:255},r=8,a=e/r,o=0,i=0;i<e;i++){var u=Math.floor(i/a);n.bins[u]?n.bins[u]+=t[i]:n.bins[u]=t[i],t[i]>n.max&&(n.max=t[i]),t[i]<n.min&&(n.min=t[i]),o+=t[i]}for(var s=0;s<n.bins.length;s++)n.bins[s]=n.bins[s]/255/a;return n.max/=255,n.min/=255,n.average=o/255/e,n}}return null}},{key:"getFrequencyData",value:function(){var t=this.analyser;if(!t)return console.warn("no analyser"),null;var e=t.frequencyBinCount,n=new Uint8Array(e);return t.getByteFrequencyData(n),n}},{key:"getTimeDomainData",value:function(){var t=this.analyser,e=t.frequencyBinCount,n=new Uint8Array(e);return t.getByteTimeDomainData(n),n}}]),t}();e.default=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this.mediaSources=[]}return r(t,[{key:"enqueue",value:function(t){this.mediaSources.push(t)}},{key:"dequeue",value:function(){return this.popIndex(0)}},{key:"size",value:function(){return this.mediaSources.length}},{key:"popIndex",value:function(t){return this.mediaSources.splice(t,1)[0]}},{key:"clear",value:function(){this.mediaSources.splice(0,this.mediaSources.length)}},{key:"getDisplayValues",value:function(){return this.mediaSources.map(function(t){return{label:t.getLabel(),metadata:t.getMetaData(),type:t.getType()}})}}]),t}();e.default=a},function(t,e){}])});
//# sourceMappingURL=visual-audio.js.map